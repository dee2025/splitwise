## ğŸ¨ Visual Summary - Settlement System at a Glance

### Before vs After Comparison

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OLD COMPLEX SYSTEM                  NEW SIMPLE SYSTEM               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚ Database:                           Database:                        â”‚
â”‚ â”œâ”€ 100+ Settlement fields âŒ       â”œâ”€ 25 essential fields âœ…         â”‚
â”‚ â”œâ”€ Complex proof tracking âŒ       â”œâ”€ Optional proof âœ…              â”‚
â”‚ â”œâ”€ 6 status states âŒ              â”œâ”€ 3 simple states âœ…             â”‚
â”‚ â””â”€ Mandatory uploads âŒ            â””â”€ No mandatory fields âœ…         â”‚
â”‚                                                                      â”‚
â”‚ UI Workflow:                        UI Workflow:                     â”‚
â”‚ â”œâ”€ 5+ modal steps âŒ               â”œâ”€ 3 modal steps âœ…               â”‚
â”‚ â”œâ”€ Multiple confirmations âŒ       â”œâ”€ Single confirmation âœ…         â”‚
â”‚ â”œâ”€ Complex proof system âŒ         â”œâ”€ Optional proof âœ…              â”‚
â”‚ â””â”€ Settlement anytime âŒ           â””â”€ Settlement after trip âœ…       â”‚
â”‚                                                                      â”‚
â”‚ APIs:                              APIs:                             â”‚
â”‚ â”œâ”€ calculate (complex) âŒ          â”œâ”€ calculate-final (simple) âœ…    â”‚
â”‚ â”œâ”€ batch âŒ                        â”œâ”€ create-final âœ…                â”‚
â”‚ â”œâ”€ summary âŒ                      â”œâ”€ mark-paid âœ…                   â”‚
â”‚ â””â”€ verify (complex) âŒ             â””â”€ complete-trip âœ…              â”‚
â”‚                                                                      â”‚
â”‚ UX Friction:                       UX Friction:                      â”‚
â”‚ â”œâ”€ High âŒ                         â”œâ”€ Minimal âœ…                    â”‚
â”‚ â”œâ”€ Confusing âŒ                    â”œâ”€ Clear âœ…                      â”‚
â”‚ â”œâ”€ Mandatory items âŒ              â”œâ”€ Mostly optional âœ…             â”‚
â”‚ â””â”€ Many confirmations âŒ           â””â”€ Single confirmation âœ…         â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Complete User Journey - Visual Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SPLITWISE SETTLEMENT JOURNEY                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PHASE 1: TRIP CREATION & EXPENSES
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¥ Create Group             â”‚
â”‚    \"Goa Vacation\"          â”‚
â”‚    tripStatus: ONGOING ğŸ”µ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¥ Add Members (2-3 friends) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â”‚             â”‚
    â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Expense â”‚  â”‚ Expense â”‚  â”‚ Expense â”‚  (Add multiple)
â”‚ â‚¹1000   â”‚  â”‚ â‚¹500    â”‚  â”‚ â‚¹300    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚            â”‚            â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Running totals:     â”‚
    â”‚ Alice: +â‚¹200        â”‚
    â”‚ Bob: -â‚¹400          â”‚
    â”‚ You: +â‚¹200          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PHASE 2: TRIP END
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         GROUP PAGE HEADER                 â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  Trip: Goa Vacation        [ğŸš© END TRIP]  â”‚
    â”‚  Status: ONGOING                          â”‚
    â”‚  Total: â‚¹1800                             â”‚
    â”‚  Members: 3                               â”‚
    â”‚  [ADD EXPENSE]                            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
             â”‚ Click END TRIP                 â”‚
             â”‚ (Creator only)                 â”‚
             â–¼                                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
    â”‚ ğŸ“ Trip Ending...       â”‚               â”‚
    â”‚ [Loading animation]     â”‚               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
              â”‚                              â”‚
              â–¼                              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ âœ… Trip Ended!          â”‚   â”‚
    â”‚ Notification sent        â”‚   â”‚
    â”‚ All expenses frozen      â”‚   â”‚
    â”‚ Status: COMPLETED ğŸŸ¢     â”‚   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
              â”‚                   â”‚
              â–¼                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚ UI Auto-Switches To:    â”‚   â”‚
    â”‚ SETTLEMENTS TAB â¬…â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PHASE 3: SETTLEMENT PROCESS
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    YOUR BALANCE: You Owe â‚¹400           â”‚
    â”‚                                         â”‚
    â”‚    PAY TO:                              â”‚
    â”‚    â–¡ Alice: â‚¹200                        â”‚
    â”‚    â–¡ Bob: â‚¹200                          â”‚
    â”‚                                         â”‚
    â”‚    [ğŸ”˜ SETTLE PAYMENT]                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ STEP 1: CONFIRM AMOUNT       â”‚
    â”‚                              â”‚
    â”‚ You Owe Alice: â‚¹200          â”‚
    â”‚ âœ“ Confirm                    â”‚
    â”‚ [PROCEED TO PAYMENT]         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ STEP 2: PAYMENT METHOD       â”‚
    â”‚                              â”‚
    â”‚ â—‹ ğŸ’µ Cash                   â”‚
    â”‚ âŠ™ ğŸ“± UPI (Selected)         â”‚
    â”‚ â—‹ ğŸ¦ Bank Transfer          â”‚
    â”‚ â—‹ ğŸ’³ Wallet                 â”‚
    â”‚                              â”‚
    â”‚ Proof (Optional):            â”‚
    â”‚ [9876543210]                 â”‚
    â”‚                              â”‚
    â”‚ [SEND SETTLEMENT]            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ âœ… SENT!                      â”‚
    â”‚                              â”‚
    â”‚ Settlement request sent      â”‚
    â”‚ Amount: â‚¹200 via UPI        â”‚
    â”‚ Status: Pending â³           â”‚
    â”‚                              â”‚
    â”‚ [DONE]                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
         ALICE GETS NOTIFIED
         \"You received â‚¹200 from [You]\"

PHASE 4: RECEIVER CONFIRMATION
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ğŸ“¨ SETTLEMENT NOTIFICATION         â”‚
    â”‚                                    â”‚
    â”‚ From: You                          â”‚
    â”‚ Amount: â‚¹200                       â”‚
    â”‚ Method: ğŸ“± UPI                     â”‚
    â”‚ Proof: 9876543210                  â”‚
    â”‚                                    â”‚
    â”‚ [âœ… CONFIRM RECEIPT] [âŒ DECLINE]  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼ (Alice confirms)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ âœ… PAYMENT CONFIRMED               â”‚
    â”‚                                    â”‚
    â”‚ Settlement marked PAID             â”‚
    â”‚ Confirmed: 23 Feb, 3:45 PM        â”‚
    â”‚ Notification sent to You           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼ (You get notified)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ âœ… PAYMENT CONFIRMED               â”‚
    â”‚                                    â”‚
    â”‚ Alice confirmed receiving â‚¹200     â”‚
    â”‚ Status: PAID                       â”‚
    â”‚ Shows in History âœ“                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

END: SETTLEMENT COMPLETE âœ…
```

### State Visualization at Each Stage

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       SETTLEMENT OBJECT through lifecycle          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚ CREATED:                                           â”‚
â”‚ {                                                  â”‚
â”‚   _id: \"settlement_123\",                         â”‚
â”‚   groupId: \"group_456\",                          â”‚
â”‚   fromUser: \"user_you\",                          â”‚
â”‚   toUser: \"user_alice\",                          â”‚
â”‚   totalAmount: 200,                               â”‚
â”‚   method: \"upi\",                                â”‚
â”‚   proof: \"9876543210\",                          â”‚
â”‚   status: \"pending\" â† KEY STATE                  â”‚
â”‚ }                                                  â”‚
â”‚                                                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚ receiver confirms                                 â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚                                                    â”‚
â”‚ UPDATED:                                           â”‚
â”‚ {                                                  â”‚
â”‚   ...same as above...                             â”‚
â”‚   status: \"paid\" â† CHANGED!                     â”‚
â”‚   confirmedAt: \"2026-02-23T15:45:00Z\",          â”‚
â”‚   confirmedBy: \"user_alice\"                     â”‚
â”‚ }                                                  â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Transformation Flow

```
RAW EXPENSES:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Expense 1: Hotel â‚¹3000          â”‚
â”‚ Paid by: Alice                  â”‚
â”‚ Split: 3 ways                   â”‚
â”‚ Each owes: â‚¹1000                â”‚
â”‚                                 â”‚
â”‚ Expense 2: Food â‚¹1500           â”‚
â”‚ Paid by: Bob                    â”‚
â”‚ Split: 3 ways                   â”‚
â”‚ Each owes: â‚¹500                 â”‚
â”‚                                 â”‚
â”‚ Expense 3: Transport â‚¹600      â”‚
â”‚ Paid by: You                    â”‚
â”‚ Split: 3 ways                   â”‚
â”‚ Each owes: â‚¹200                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    (calculate-final API)
             â”‚
             â–¼
CALCULATE BALANCES:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Alice:                           â”‚
â”‚ - Paid: â‚¹3000                    â”‚
â”‚ - Owes: â‚¹1000 + â‚¹500 + â‚¹200     â”‚
â”‚ - Balance: +â‚¹2000 (gets paid)   â”‚
â”‚                                  â”‚
â”‚ Bob:                             â”‚
â”‚ - Paid: â‚¹1500                    â”‚
â”‚ - Owes: â‚¹1000 + â‚¹500 + â‚¹200     â”‚
â”‚ - Balance: -â‚¹1200 (pays)        â”‚
â”‚                                  â”‚
â”‚ You:                             â”‚
â”‚ - Paid: â‚¹600                     â”‚
â”‚ - Owes: â‚¹1000 + â‚¹500 + â‚¹200     â”‚
â”‚ - Balance: -â‚¹800 (pays)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    (create-final API x3)
             â”‚
             â–¼
CREATE SETTLEMENTS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Settlement 1:                    â”‚
â”‚ Bob â†’ Alice: â‚¹1200              â”‚
â”‚ Status: PENDING                  â”‚
â”‚                                  â”‚
â”‚ Settlement 2:                    â”‚
â”‚ You â†’ Alice: â‚¹800               â”‚
â”‚ Status: PENDING                  â”‚
â”‚                                  â”‚
â”‚ Settlement 3:                    â”‚
â”‚ You â†’ Bob: (depends on balance)  â”‚
â”‚ Status: PENDING                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    (mark-paid API)
             â”‚
             â–¼
CONFIRM SETTLEMENTS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Settlement 1: PAID âœ…            â”‚
â”‚ Settlement 2: PAID âœ…            â”‚
â”‚ Settlement 3: PAID âœ…            â”‚
â”‚                                  â”‚
â”‚ All debts settled! ğŸ‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### UI Component Hierarchy

```
GroupPage
â”œâ”€ Header
â”‚  â”œâ”€ Back Button
â”‚  â”œâ”€ Group Title
â”‚  â”œâ”€ Trip Status Badge (ğŸ”µ ONGOING | ğŸŸ¢ COMPLETED)
â”‚  â”‚
â”‚  â””â”€ Action Buttons
â”‚     â”œâ”€ [ğŸš© END TRIP] (visible if creator & ongoing)
â”‚     â””â”€ [â• ADD EXPENSE] (disabled if completed)
â”‚
â”œâ”€ Stats Cards Row
â”‚  â”œâ”€ Total Expenses
â”‚  â”œâ”€ Members Count
â”‚  â”œâ”€ Active Expenses
â”‚  â””â”€ Trip Status Display
â”‚
â”œâ”€ Tab Navigation
â”‚  â”œâ”€ Expenses
â”‚  â”œâ”€ Members
â”‚  â”œâ”€ Balances
â”‚  â”œâ”€ â­ Settlements (NEW)
â”‚  â””â”€ Activity
â”‚
â””â”€ Tab Content Area
   â”‚
   â”œâ”€ ExpensesTab: List of all expenses
   â”œâ”€ MembersTab: List of members
   â”œâ”€ BalancesTab: Who owes whom
   â”‚
   â”œâ”€ â­ SettlementsTab (Updated)
   â”‚  â”œâ”€ If ongoing:
   â”‚  â”‚  â””â”€ Info message \"Trip still active\"
   â”‚  â”‚
   â”‚  â””â”€ If completed:
   â”‚     â””â”€ FinalSettlementModal
   â”‚        â”œâ”€ Step 1: SummaryView
   â”‚        â”‚  â”œâ”€ Your balance
   â”‚        â”‚  â”œâ”€ Breakdown by person
   â”‚        â”‚  â””â”€ [PROCEED]
   â”‚        â”‚
   â”‚        â”œâ”€ Step 2: PaymentMethodView
   â”‚        â”‚  â”œâ”€ Method selection
   â”‚        â”‚  â”œâ”€ Proof upload (optional)
   â”‚        â”‚  â”œâ”€ Notes (optional)
   â”‚        â”‚  â””â”€ [SEND]
   â”‚        â”‚
   â”‚        â””â”€ Step 3: ConfirmationView
   â”‚           â”œâ”€ Success message
   â”‚           â””â”€ [DONE]
   â”‚
   â””â”€ ActivityTab: Log of actions
```

### Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Simplified Settlement System Database Schema      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                   â”‚
â”‚ Groups                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚ â”‚ _id                         â”‚                  â”‚
â”‚ â”‚ name: \"Goa Trip\"           â”‚                  â”‚
â”‚ â”‚ members: [User._id] â†â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ tripStatus: \"completed\" â†â”€â”â”‚              â”‚   â”‚
â”‚ â”‚ tripEndDate: Date â†â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚              â”‚   â”‚
â”‚ â”‚ createdBy: User._id â†â”€â”€â”€â”€â”€â”€â”â”‚â”‚â”‚             â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚â”‚             â”‚   â”‚
â”‚                     â–²           â”‚â”‚â”‚             â”‚   â”‚
â”‚ Settlements         â”‚           â”‚â”‚â”‚             â”‚   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚â”‚â”‚             â”‚   â”‚
â”‚ â”‚ _id                 â”‚         â”‚â”‚â”‚             â”‚   â”‚
â”‚ â”‚ groupId â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚             â”‚   â”‚
â”‚ â”‚ fromUser â”€â”€â”€â”       â”‚          â”‚â”‚             â”‚   â”‚
â”‚ â”‚ toUser â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”   â”‚          â”‚â”‚             â”‚   â”‚
â”‚ â”‚ totalAmount â”‚   â”‚   â”‚          â”‚â”‚             â”‚   â”‚
â”‚ â”‚ status â—„â”€â”€â”€â”€â”˜   â”‚   â”‚          â”‚â”‚             â”‚   â”‚
â”‚ â”‚ tripStatus â”€â”€â”€â”€â”€â”¼â”€â” â”‚          â”‚â”‚             â”‚   â”‚
â”‚ â”‚ tripEndDate â”€â”€â”€â”€â”¼â”€â”¼â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚             â”‚   â”‚
â”‚ â”‚ proof (opt)     â”‚ â”‚ â”‚           â”‚             â”‚   â”‚
â”‚ â”‚ method          â”‚ â”‚ â”‚           â”‚             â”‚   â”‚
â”‚ â”‚ createdAt       â”‚ â”‚ â”‚           â”‚             â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”¼â”€â”˜           â”‚             â”‚   â”‚
â”‚                   â”‚ â”‚             â”‚             â”‚   â”‚
â”‚                   â”‚ â–¼             â”‚             â”‚   â”‚
â”‚         Users    â”‚              â”‚             â”‚   â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚             â”‚   â”‚
â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚             â”‚   â”‚
â”‚         â”‚  â”‚ _id            â”‚   â”‚             â”‚   â”‚
â”‚         â”‚  â”‚ name           â”‚   â”‚             â”‚   â”‚
â”‚         â”‚  â”‚ email          â”‚   â”‚             â”‚   â”‚
â”‚         â”‚  â”‚ groups â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                  â”‚
â”‚         â”‚                       â”‚                  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                   â”‚
â”‚ Expenses                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚ â”‚ _id                      â”‚                     â”‚
â”‚ â”‚ groupId â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º Groups._id       â”‚
â”‚ â”‚ amount       â”‚           â”‚                     â”‚
â”‚ â”‚ paidBy â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”      â”‚                     â”‚
â”‚ â”‚ splitAmong â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”   â”‚                     â”‚
â”‚ â”‚ category     â”‚    â”‚  â”‚   â”‚                     â”‚
â”‚ â”‚ createdAt    â”‚    â”‚  â”‚   â”‚                     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”€â”˜                     â”‚
â”‚                â”‚    â”‚  â”‚                         â”‚
â”‚                â””â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â–º Users._id (Multiple)â”‚
â”‚                     â”‚  â”‚                         â”‚
â”‚                     â””â”€â”€â”˜                         â”‚
â”‚                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RELATIONSHIPS:
â€¢ Group has many Expenses (1:N)
â€¢ Group has many Users/Members (M:N via members array)
â€¢ Group has many Settlements (1:N via groupId)
â€¢ Settlement references Group, fromUser, toUser
â€¢ Expense references Group (paidBy, splitAmong)
â€¢ All inherit trip management from Group
```

### Error State Handling

```
ERROR SCENARIOS & RESPONSES:

1. User Not Creator, Tries to End Trip
   âŒ API Response: 403 Forbidden
   âœ“ Frontend: [END TRIP] button hidden
   âœ“ Toast: \"Only creator can end trip\"

2. Settlement Amount Mismatch
   âŒ API Response: 400 Bad Request
   âœ“ Frontend: Validation error shown
   âœ“ Toast: \"Amount doesn't match balance\"

3. Trip Already Completed, Try Adding Expense
   âŒ API Response: 409 Conflict
   âœ“ Frontend: [ADD EXPENSE] button disabled
   âœ“ Toast: \"Trip is completed, can't add expenses\"

4. Settlement Not Found
   âŒ API Response: 404 Not Found
   âœ“ Frontend: Empty state shown
   âœ“ Toast: \"Settlement not found\"

5. Network Error During Settlement Send
   âŒ Request fails
   âœ“ Frontend: Retry button shown
   âœ“ Toast: \"Failed to send, please retry\"
   âœ“ Data saved locally for retry
```

### Success Indicators

```
âœ… USER EXPERIENCE SUCCESS INDICATORS

Trip Creation âœ“
â”œâ”€ Group appears in list
â”œâ”€ Can add members
â””â”€ Status shows ONGOING

During Trip âœ“
â”œâ”€ Expenses appear immediately
â”œâ”€ Balances update correctly
â””â”€ Can see running totals

Trip Completion âœ“
â”œâ”€ [END TRIP] button works
â”œâ”€ Status changes to COMPLETED
â”œâ”€ All members notified
â””â”€ Settlements tab enabled

Settlement Send âœ“
â”œâ”€ Modal opens smoothly
â”œâ”€ 3-step flow works
â”œâ”€ Optional proof skips fine
â””â”€ Settlement created

Receiver Confirmation âœ“
â”œâ”€ Notification received
â”œâ”€ Can view details
â”œâ”€ Confirm button works
â””â”€ Status marks PAID

Final âœ“
â”œâ”€ Both see PAID status
â”œâ”€ Appears in history
â”œâ”€ No errors in console
â””â”€ Mobile looks good
```

---

This visual summary shows the complete system at a glance! ğŸ“Š
