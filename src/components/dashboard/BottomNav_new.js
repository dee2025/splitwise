"use client\";\n\nimport { logout } from \"@/redux/slices/authSlice\";\nimport axios from \"axios\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport {\n  Bell,\n  Home,\n  IndianRupee,\n  LogOut,\n  Settings,\n  User,\n  Users,\n  ChevronUp,\n} from \"lucide-react\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nexport default function BottomNav() {\n  const router = useRouter();\n  const pathname = usePathname();\n  const dispatch = useDispatch();\n  const { user } = useSelector((state) => state.auth);\n  const [showMenu, setShowMenu] = useState(false);\n\n  const tabs = [\n    { name: \"Home\", icon: Home, path: \"/dashboard\" },\n    { name: \"Groups\", icon: Users, path: \"/groups\" },\n    { name: \"Expenses\", icon: IndianRupee, path: \"/expenses\" },\n    { name: \"Alerts\", icon: Bell, path: \"/notifications\" },\n  ];\n\n  const handleLogout = async () => {\n    setShowMenu(false);\n    try {\n      await axios.post(\"/api/auth/logout\");\n    } catch (error) {\n      console.error(\"Logout API error:\", error);\n    } finally {\n      dispatch(logout());\n      toast.success(\"Logged out successfully\");\n      router.push(\"/\");\n    }\n  };\n\n  return (\n    <>\n      {/* BOTTOM NAV - Mobile Only (md:hidden) */}\n      <motion.div\n        initial={{ y: 100 }}\n        animate={{ y: 0 }}\n        transition={{ duration: 0.3 }}\n        className=\"fixed bottom-0 left-0 right-0 z-50 md:hidden\"\n      >\n        <div className=\"bg-white/95 backdrop-blur-lg border-t border-gray-200 shadow-lg\">\n          <div className=\"flex items-center justify-around px-2 py-2\">\n            {tabs.map((tab) => {\n              const Icon = tab.icon;\n              const active = pathname.startsWith(tab.path);\n\n              return (\n                <motion.button\n                  key={tab.path}\n                  onClick={() => router.push(tab.path)}\n                  whileTap={{ scale: 0.85 }}\n                  whileHover={{ scale: 1.05 }}\n                  className=\"flex flex-col items-center gap-1 flex-1 py-2 px-1 rounded-lg transition-all duration-200\"\n                >\n                  <div\n                    className={`p-2 rounded-lg transition-all duration-200 ${\n                      active\n                        ? \"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg\"\n                        : \"text-gray-600 hover:bg-gray-100\"\n                    }`}\n                  >\n                    <Icon className=\"w-5 h-5\" />\n                  </div>\n                  <span\n                    className={`text-[11px] font-medium transition-colors duration-200 ${\n                      active ? \"text-blue-600 font-semibold\" : \"text-gray-600\"\n                    }`}\n                  >\n                    {tab.name}\n                  </span>\n                </motion.button>\n              );\n            })}\n\n            {/* PROFILE BUTTON */}\n            <motion.button\n              whileTap={{ scale: 0.85 }}\n              whileHover={{ scale: 1.05 }}\n              onClick={() => setShowMenu((prev) => !prev)}\n              className=\"flex flex-col items-center gap-1 flex-1 py-2 px-1 rounded-lg transition-all duration-200\"\n            >\n              <div\n                className={`p-2 rounded-lg transition-all duration-200 ${\n                  showMenu\n                    ? \"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg\"\n                    : \"text-gray-600 hover:bg-gray-100\"\n                }`}\n              >\n                <User className=\"w-5 h-5\" />\n              </div>\n              <span\n                className={`text-[11px] font-medium transition-colors duration-200 ${\n                  showMenu ? \"text-blue-600 font-semibold\" : \"text-gray-600\"\n                }`}\n              >\n                Profile\n              </span>\n            </motion.button>\n          </div>\n        </div>\n      </motion.div>\n\n      {/* PROFILE MENU POPUP */}\n      <AnimatePresence>\n        {showMenu && (\n          <>\n            <motion.div\n              className=\"fixed inset-0 z-40 bg-black/20 backdrop-blur-sm\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              onClick={() => setShowMenu(false)}\n            />\n\n            <motion.div\n              initial={{ opacity: 0, y: 20, scale: 0.9 }}\n              animate={{ opacity: 1, y: 0, scale: 1 }}\n              exit={{ opacity: 0, y: 20, scale: 0.9 }}\n              transition={{ type: \"spring\", damping: 25, stiffness: 300 }}\n              className=\"fixed bottom-[72px] left-1/2 -translate-x-1/2 w-80 z-50 bg-white rounded-2xl shadow-xl border border-gray-100\"\n            >\n              {/* User Header */}\n              <div className=\"p-4 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-purple-50\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-12 h-12 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold text-lg shrink-0 shadow-md\">\n                    {user?.fullName?.charAt(0).toUpperCase() ?? \"?\"}\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-sm font-bold text-gray-900 truncate\">\n                      {user?.fullName}\n                    </p>\n                    <p className=\"text-xs text-gray-600 truncate\">\n                      @{user?.username}\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Menu Options */}\n              <div className=\"py-2\">\n                {[\n                  { icon: User, label: \"Profile\", path: \"/profile\" },\n                  { icon: Settings, label: \"Settings\", path: \"/profile\" },\n                ].map((item, idx) => {\n                  const Icon = item.icon;\n                  return (\n                    <motion.button\n                      key={idx}\n                      onClick={() => {\n                        router.push(item.path);\n                        setShowMenu(false);\n                      }}\n                      whileHover={{ backgroundColor: \"#f3f4f6\" }}\n                      className=\"w-full px-4 py-3 flex items-center gap-3 text-gray-700 hover:text-blue-600 transition-colors duration-200 text-sm font-medium\"\n                    >\n                      <Icon className=\"w-5 h-5\" />\n                      {item.label}\n                    </motion.button>\n                  );\n                })}\n\n                {/* Divider */}\n                <div className=\"my-2 h-px bg-gray-100\" />\n\n                {/* Logout */}\n                <motion.button\n                  onClick={handleLogout}\n                  whileHover={{ backgroundColor: \"#fef2f2\" }}\n                  className=\"w-full px-4 py-3 flex items-center gap-3 text-red-600 hover:text-red-700 transition-colors duration-200 text-sm font-medium\"\n                >\n                  <LogOut className=\"w-5 h-5\" />\n                  Logout\n                </motion.button>\n              </div>\n            </motion.div>\n          </>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n